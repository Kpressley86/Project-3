{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\maria\\\\Project-3\\\\client\\\\src\\\\contexts\\\\auth0-context.js\";\nimport React, { Component, createContext, useContext } from 'react';\nimport createAuth0Client from '@auth0/auth0-spa-js'; // create the context\n\nexport const Auth0Context = createContext();\nexport const useAuth0 = () => useContext(Auth0Context); // create a provider\n\nexport class Auth0Provider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      auth0Client: null,\n      isLoading: true,\n      isAuthenticated: true,\n      user: null\n    };\n    this.config = {\n      domain: process.env.REACT_APP_AUTH0_DOMAIN,\n      client_id: process.env.REACT_APP_AUTH0_CLIENT_ID,\n      redirect_uri: window.location.origin\n    };\n\n    this.initializeAuth0 = async () => {\n      const auth0Client = await createAuth0Client(this.config);\n      this.setState({\n        auth0Client\n      }); // check to see if they have been redirected after login\n\n      if (window.location.search.includes('code=')) {\n        return this.handleRedirectCallback();\n      }\n\n      const isAuthenticated = await auth0Client.isAuthenticated();\n      const user = isAuthenticated ? await auth0Client.getUser() : null;\n      this.setState({\n        isLoading: false,\n        isAuthenticated,\n        user\n      });\n    };\n\n    this.handleRedirectCallback = async () => {\n      this.setState({\n        isLoading: true\n      });\n      await this.state.auth0Client.handleRedirectCallback();\n      const user = await this.state.auth0Client.getUser();\n      this.setState({\n        user,\n        isAuthenticated: true,\n        isLoading: false\n      });\n      window.history.replaceState({}, document.title, window.location.pathname);\n    };\n  }\n\n  componentDidMount() {\n    this.initializeAuth0();\n  } // initialize the auth0 library\n\n\n  render() {\n    const _this$state = this.state,\n          auth0Client = _this$state.auth0Client,\n          isLoading = _this$state.isLoading,\n          isAuthenticated = _this$state.isAuthenticated,\n          user = _this$state.user;\n    const children = this.props.children;\n    const configObject = {\n      isLoading,\n      isAuthenticated,\n      user,\n      loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n      getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n      getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n      logout: (...p) => auth0Client.logout(...p)\n    };\n    return React.createElement(Auth0Context.Provider, {\n      value: configObject,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, children);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/maria/Project-3/client/src/contexts/auth0-context.js"],"names":["React","Component","createContext","useContext","createAuth0Client","Auth0Context","useAuth0","Auth0Provider","state","auth0Client","isLoading","isAuthenticated","user","config","domain","process","env","REACT_APP_AUTH0_DOMAIN","client_id","REACT_APP_AUTH0_CLIENT_ID","redirect_uri","window","location","origin","initializeAuth0","setState","search","includes","handleRedirectCallback","getUser","history","replaceState","document","title","pathname","componentDidMount","render","children","props","configObject","loginWithRedirect","p","getTokenSilently","getIdTokenClaims","logout"],"mappings":"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","sourcesContent":["import React, { Component, createContext, useContext } from 'react';\r\nimport createAuth0Client from '@auth0/auth0-spa-js';\r\n\r\n// create the context\r\nexport const Auth0Context = createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\n\r\n// create a provider\r\nexport class Auth0Provider extends Component {\r\n\tstate = {\r\n\t\tauth0Client: null,\r\n\t\tisLoading: true,\r\n\t\tisAuthenticated: true,\r\n\t\tuser: null\r\n\t};\r\n\tconfig = {\r\n\t\tdomain: process.env.REACT_APP_AUTH0_DOMAIN,\r\n\t\tclient_id: process.env.REACT_APP_AUTH0_CLIENT_ID,\r\n\t\tredirect_uri: window.location.origin\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.initializeAuth0();\r\n\t}\r\n\r\n\t// initialize the auth0 library\r\n\tinitializeAuth0 = async () => {\r\n\t\tconst auth0Client = await createAuth0Client(this.config);\r\n\t\tthis.setState({ auth0Client });\r\n\r\n\t\t// check to see if they have been redirected after login\r\n\t\tif (window.location.search.includes('code=')) {\r\n\t\t\treturn this.handleRedirectCallback();\r\n\t\t}\r\n\r\n\t\tconst isAuthenticated = await auth0Client.isAuthenticated();\r\n\t\tconst user = isAuthenticated ? await auth0Client.getUser() : null;\r\n\t\tthis.setState({ isLoading: false, isAuthenticated, user });\r\n\t};\r\n\r\n\thandleRedirectCallback = async () => {\r\n\t\tthis.setState({ isLoading: true });\r\n\r\n\t\tawait this.state.auth0Client.handleRedirectCallback();\r\n\t\tconst user = await this.state.auth0Client.getUser();\r\n\r\n\t\tthis.setState({ user, isAuthenticated: true, isLoading: false });\r\n\t\twindow.history.replaceState({}, document.title, window.location.pathname);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { auth0Client, isLoading, isAuthenticated, user } = this.state;\r\n\t\tconst { children } = this.props;\r\n\r\n\t\tconst configObject = {\r\n\t\t\tisLoading,\r\n\t\t\tisAuthenticated,\r\n\t\t\tuser,\r\n\t\t\tloginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\r\n\t\t\tgetTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\r\n\t\t\tgetIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\r\n\t\t\tlogout: (...p) => auth0Client.logout(...p)\r\n\t\t};\r\n\r\n\t\treturn <Auth0Context.Provider value={configObject}>{children}</Auth0Context.Provider>;\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}