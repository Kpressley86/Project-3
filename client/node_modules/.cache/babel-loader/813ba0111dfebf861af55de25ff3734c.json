{"ast":null,"code":"import _regeneratorRuntime from \"c:\\\\Users\\\\kelly\\\\Desktop\\\\Project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"c:\\\\Users\\\\kelly\\\\Desktop\\\\Project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"c:\\\\Users\\\\kelly\\\\Desktop\\\\Project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"c:\\\\Users\\\\kelly\\\\Desktop\\\\Project-3\\\\client\\\\src\\\\views\\\\PieApi.js\";\n// src/views/ExternalApi.js\nimport React, { useState } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport Books from '../pages/Books/Books';\n\nvar ExternalApi = function ExternalApi() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showResult = _useState2[0],\n      setShowResult = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      apiMessage = _useState4[0],\n      setApiMessage = _useState4[1];\n\n  var _useAuth = useAuth0(),\n      getTokenSilently = _useAuth.getTokenSilently;\n\n  var callApi =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"/api/external\", {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n              setShowResult(true);\n              setApiMessage(responseData);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function callApi() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"External API\"), React.createElement(\"button\", {\n    onClick: callApi,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Old Savings\"), React.createElement(Books, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }), showResult && React.createElement(\"code\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, JSON.stringify(apiMessage, null, 2)));\n};\n\nexport default ExternalApi;","map":{"version":3,"sources":["c:/Users/kelly/Desktop/Project-3/client/src/views/PieApi.js"],"names":["React","useState","useAuth0","Books","ExternalApi","showResult","setShowResult","apiMessage","setApiMessage","getTokenSilently","callApi","token","fetch","headers","Authorization","response","json","responseData","console","error","JSON","stringify"],"mappings":";;;;AAAA;AAEA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA,kBACYH,QAAQ,CAAC,KAAD,CADpB;AAAA;AAAA,MACjBI,UADiB;AAAA,MACLC,aADK;;AAAA,mBAEYL,QAAQ,CAAC,EAAD,CAFpB;AAAA;AAAA,MAEjBM,UAFiB;AAAA,MAELC,aAFK;;AAAA,iBAGKN,QAAQ,EAHb;AAAA,MAGhBO,gBAHgB,YAGhBA,gBAHgB;;AAKxB,MAAMC,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEQD,gBAAgB,EAFxB;;AAAA;AAENE,cAAAA,KAFM;AAAA;AAAA,qBAIWC,KAAK,CAAC,eAAD,EAAkB;AAC5CC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,mBAAYH,KAAZ;AADN;AADmC,eAAlB,CAJhB;;AAAA;AAINI,cAAAA,QAJM;AAAA;AAAA,qBAUeA,QAAQ,CAACC,IAAT,EAVf;;AAAA;AAUNC,cAAAA,YAVM;AAYZX,cAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,cAAAA,aAAa,CAACS,YAAD,CAAb;AAbY;AAAA;;AAAA;AAAA;AAAA;AAeZC,cAAAA,OAAO,CAACC,KAAR;;AAfY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPT,OAAO;AAAA;AAAA;AAAA,KAAb;;AAmBA,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAQ,IAAA,OAAO,EAAEA,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,EAGE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIGL,UAAU,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOe,IAAI,CAACC,SAAL,CAAed,UAAf,EAA2B,IAA3B,EAAiC,CAAjC,CAAP,CAJjB,CADF;AAQD,CAhCD;;AAkCA,eAAeH,WAAf","sourcesContent":["// src/views/ExternalApi.js\n\nimport React, { useState } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport Books from '../pages/Books/Books';\n\nconst ExternalApi = () => {\n  const [showResult, setShowResult] = useState(false);\n  const [apiMessage, setApiMessage] = useState(\"\");\n  const { getTokenSilently } = useAuth0();\n\n  const callApi = async () => {\n    try {\n      const token = await getTokenSilently();\n\n      const response = await fetch(\"/api/external\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      const responseData = await response.json();\n\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <>\n      <h1>External API</h1>\n      <button onClick={callApi}>Old Savings</button>\n      <Books />\n      {showResult && <code>{JSON.stringify(apiMessage, null, 2)}</code>}\n    </>\n  );\n};\n\nexport default ExternalApi;"]},"metadata":{},"sourceType":"module"}